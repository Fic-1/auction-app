extends base
block append head 
  link(rel='stylesheet', href='/assets/css/style.css')
block content
    .container(style="margin-top: 3dvh")
            each product in products  
                .row
                    .col-md-12
                        .card.mb-3(style='max-width: 100%;')
                            .row.g-0
                                .col-md-4
                                    img.img-fluid.rounded-start(src=`/products/${product.coverImage}` alt=`${product.name}`)
                                .col-md-6
                                    .card-body
                                        h5.card-title #{product.name}
                                        p.card-text
                                        | #{product.description}
                                        p.card-text
                                            - const oneDay = 24*60*60*1000
                                            - const oneHour = 60*60*1000
                                            - let remainingStr
                                            - const remainingTime = product.endDate - Date.now()
                                            - if(remainingTime > 0) 
                                                - const remainingDays = Math.round(Math.abs(remainingTime / oneDay)) 
                                                - const remainingHours = Math.round(Math.abs(remainingTime / oneHour))
                                                - remainingStr = `${remainingDays > 1 ? `${remainingDays} days left`: `${remainingHours} day left`}`
                                                p.text-muted.mb-0= `${remainingStr}`
                                            - if(remainingTime < 0) 
                                                p.text-muted.mb-0 Auction has ended
                                        .d-flex
                                            img.rounded-circle.flex-shrink-0.me-3.fit-cover(width='50' height='50' src=`/img/${product.seller.photo === 'default.png' ? product.seller.photo : product.seller.photo + '.jpg' }`)
                                            div
                                                p.fw-bold.mb-0= product.seller.name
                                                p.text-muted.mb-0 LOKACIJA - UPDATE MODELA
                                .col-md-2
                                    .editBtnDiv(style="border-left:1px solid #000; height: 100%")
                                        a(href=`/my-products/${product._id}/edit`)
                                            button.editBtn(for="name")
                                                span
                                                    img.editImg(src='/assets/img/edit-128.png')
                                        a(href=`/products/${product._id}`)
                                            button.editBtn(for="name")
                                                span
                                                    img.editImg(src='/assets/img/link-128.png')